<view class="container">
  <scroll-view class="chat-list" scroll-y scroll-into-view="{{toView}}" scroll-with-animation="true" enable-flex="true">
    <view class="chat-item {{item.type === 'user' ? 'user' : 'ai'}}" wx:for="{{msgList}}" wx:key="index" id="msg-{{index}}">
      <view class="avatar">
        <image wx:if="{{item.type === 'ai'}}" src="/assets/images/favicon.png" style="width: 70%; height: 70%;" />
        <text wx:else>ğŸ‘¤</text>
      </view>
      <view class="content">
        <text user-select="true">{{item.content}}</text>
      </view>
    </view>
    
    <!-- Loading çŠ¶æ€ -->
    <view class="chat-item ai" wx:if="{{isLoading}}">
      <view class="avatar">
        <image src="/assets/images/favicon.png" style="width: 70%; height: 70%;" />
      </view>
      <view class="content loading-content">
        <view class="dot-flashing"></view>
      </view>
    </view>

    <!-- å ä½å…ƒç´ ï¼Œç¡®ä¿æœ€åä¸€æ¡æ¶ˆæ¯ä¸è¢«é®æŒ¡ -->
    <view style="height: 20rpx;" id="msg-end"></view>
  </scroll-view>

  <view class="input-area">
    <view class="input-wrapper">
      <textarea 
        class="input" 
        placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." 
        value="{{inputValue}}" 
        bindinput="onInput" 
        confirm-type="send" 
        bindconfirm="sendMsg" 
        auto-height="true"
        cursor-spacing="20"
        maxlength="500"
        show-confirm-bar="{{false}}"
        disable-default-padding="true"
      />
    </view>
    <button class="send-btn" bindtap="sendMsg" disabled="{{!inputValue}}">å‘é€</button>
  </view>
</view>
